{% extends 'tracker/base.html' %}
{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
    .card { background: #fff; border-radius: 10px; padding: 20px; margin: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
    .card:hover { transform: translateY(-5px); }
    .btn { background-color: #4a9c8f; border: none; border-radius: 5px; padding: 10px 20px; color: #fff; }
    .btn:hover { background-color: #3d7f72; }
    .btn-danger { background-color: #e56b6f; }
    .btn-danger:hover { background-color: #b22234; }
    .btn-sm { padding: 5px 10px; font-size: 0.9rem; }
    .list-group-item { background-color: #fff; border-color: #333; display: flex; justify-content: space-between; align-items: center; transition: background 0.2s; }
    .list-group-item:hover { background: #f1faee; }
    .expense-details { display: flex; flex-direction: column; }
    .expense-meta { color: #888; font-size: 0.95rem; }
    .category-badge { background: #ffe5d9; color: #b56576; border-radius: 12px; padding: 2px 10px; font-size: 0.95rem; margin-left: 8px; }
    .amount { font-weight: bold; color: #e56b6f; margin-right: 15px; }
    .actions { display: flex; gap: 8px; align-items: center; }
    .empty-illustration { text-align: center; margin: 30px 0; }
    .empty-illustration i { font-size: 3rem; color: #bfc0c0; }
    @media (max-width: 600px) {
        .list-group-item { flex-direction: column; align-items: flex-start; }
        .actions { margin-top: 10px; }
    }
</style>

<h1 class="text-center mb-4">Expenses</h1>
<div class="card">
    <div class="text-center mb-3">
        <a href="{% url 'expense_create' %}" class="btn"><i class="fas fa-plus"></i> Add New Expense</a>
    </div>
    <ul class="list-group">
        {% for expense in expenses %}
        <li class="list-group-item">
            <div class="expense-details">
                <strong>{{ expense.description }}</strong>
                <span class="expense-meta">
                    {{ expense.date|date:"M d, Y" }}
                    <span class="category-badge">{{ expense.category }}</span>
                </span>
            </div>
            <div class="actions">
                <span class="amount">${{ expense.amount|floatformat:2 }}</span>
                <a href="{% url 'expense_update' expense.id %}" class="btn btn-sm" title="Edit">
                    <i class="fas fa-edit"></i>
                </a>
                <a href="{% url 'expense_delete' expense.id %}" class="btn btn-sm btn-danger" title="Delete" onclick="return confirm('Are you sure you want to delete this expense?');">
                    <i class="fas fa-trash-alt"></i>
                </a>
            </div>
        </li>
        {% empty %}
        <li class="list-group-item empty-illustration">
            <i class="fas fa-receipt"></i>
            <div>No expenses found. Start by adding a new one!</div>
        </li>
        {% endfor %}
    </ul>
</div>
{% endblock %}